function callibridomain(){var e,i,l="";return(e=document.domain.split(".")).length>2?(i=e.length>3?2:1,!0===_callibri.allow_subdomains&&(i-=1),l=(_callibri.allow_subdomains?"":".")+e.slice(i,e.length).toString().replace(/,/g,".")):l=(_callibri.allow_subdomains?"":".")+document.domain,l}function callibriSetCookieDomain(e,i,l,t,r){"session"!==l?(void 0===r?l.setMinutes(l.getMinutes()+10):l.setDate(l.getDate()+100),l=";expires="+l.toUTCString()+";"):l="",document.cookie=e+"="+escape(i)+"; path=/; "+t+" "+l}function callibriSetCookie(e,i,l,t,r){var a=callibridomain();"session"!==r&&(r=r?new Date((new Date).getTime()+24*r*60*60*1e3):new Date);var n=_callibri.allow_subdomains?"":"domain="+a+";";t||callibriSetCookieDomain(e,i,r,n,l),(-1===document.cookie.indexOf(e)||t)&&callibriSetCookieDomain(e,i,r,n="",l)}function callibriGetCookie(e){var i,l,t,r=document.cookie.split(";");for(i=0;i<r.length;i++)if(l=r[i].substr(0,r[i].indexOf("=")),t=r[i].substr(r[i].indexOf("=")+1),(l=l.replace(/^\s+|\s+$/g,""))==e)return unescape(t);return!1}function callibriXhrRequest(){for(var e,i=[function(){return e=callibriCheckIE8_9()?new XDomainRequest:new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],l=0;l<i.length;l++){try{e=i[l]()}catch(e){continue}break}return e}function callibriMakeRequest(e,i,l,t,r,a){try{var n,o,c,s,_;i=i||{};try{a=a||3e4}catch(e){a=3e4}if(!(c=callibriXhrRequest()))return;if(i.version=_callibri.version,i=callibriGetCalltouchSessionId(i=callibriAddTimezoneData(i=callibri_add_roistat_mark(i),e),e),e.match(/contactus$/)){i.ymclid=callibriGetMetrikaClientID(!0),i.gaclid=callibriGetGaClientID(!0),i.clbvid=_callibri.clbvid||null;var b=callibriSetPostDataFeedback(i);c.feedback_data=b}if(r||(r=_callibri.server_host),o=document.location.protocol+"//"+r+e,c.open("POST",o,!0),_=callibriCheckIE8_9(),n=setTimeout((function(){c.abort()}),a),_)c.onload=function(){c.feedback_data&&callibriRemoveElementItemLocalStorage("callibri_feedbacks",c.feedback_data),l&&"function"==typeof l&&l(c.responseText,200)};else{try{t=t||"application/json"}catch(e){t="application/json"}c.setRequestHeader("Content-Type",t),"utf-8"!==(s=document.characterSet?document.characterSet:document.charset).toString().toLowerCase()?c.setRequestHeader("Accept",t+"; charset="+s):c.setRequestHeader("Accept",t),c.onreadystatechange=function(){(3==c.readyState||4==c.readyState)&&c.feedback_data&&[200,201,204,422].indexOf(c.status)>-1&&callibriRemoveElementItemLocalStorage("callibri_feedbacks",c.feedback_data),4==c.readyState&&(clearTimeout(n),l&&"function"==typeof l&&l(c.responseText,c.status)),4==c.readyState&&(0===c.status||500==c.status||c.status>=400)&&_callibri.server_host!==r&&(["/module/number","/module/site_settings"].indexOf(e)>-1?callibriFailRequestModule(c,r,e,i,t,l):callibriMakeRequest(e,i,l,t,null,a))}}var u=JSON.stringify(i);_callibri.btr||c.send(u)}catch(e){}}function callibriFailRequestModule(e,i,l,t,r,a){var n=t.request_number||0;if([0,429,503].indexOf(e.status)>-1&&n<3){t.request_number=n+1;var o=Math.ceil(500*Math.random()+500);setTimeout(callibriMakeRequest,o,l,t,a,r,i)}else console.error("Code: ",e.status,"error: ",e.responseText,{host:i,path:l},t)}function supports_callibri_storage(){if(_callibri.localStorage_off)return!1;try{return localStorage.setItem("test_localstorage","1"),localStorage.removeItem("test_localstorage"),!0}catch(e){return _callibri.localStorage_off=!0,!1}}function callibriGetItemLocalStorage(e){if(supports_callibri_storage()){var i=localStorage.getItem(e);return null===i&&(i=callibriGetCookie(e)),i}return callibriGetCookie(e)}function callibriSetItemStorage(e,i){var l=!0;try{localStorage.setItem(e,i)}catch(e){_callibri.localStorage_off=!0,l=!1}return l}function callibriSetItemLocalStorage(e,i){var l=!0;if(supports_callibri_storage())if(i){callibriSetItemStorage(e,i)&&(l=!1)}else localStorage.removeItem(e),l=!1!==callibriGetCookie(e,i);l&&callibriSetCookie(e,i)}function supports_callibri_session_storage(){if(_callibri.sessionStorage_off)return!1;try{return sessionStorage.setItem("test_sessionstorage","1"),sessionStorage.removeItem("test_sessionstorage"),!0}catch(e){return _callibri.sessionStorage_off=!0,!1}}function callibriGetItemSessionStorage(e){if(supports_callibri_session_storage()){var i=sessionStorage.getItem(e);return null===i&&(i=callibriGetCookie(e)),i}return callibriGetCookie(e)}function callibriTrySetItemSessionStorage(e,i){var l=!0;try{sessionStorage.setItem(e,i)}catch(e){l=!1}return l}function callibriSetItemSessionStorage(e,i){var l=!0;if(supports_callibri_session_storage())if(i){callibriTrySetItemSessionStorage(e,i)&&(l=!1)}else sessionStorage.removeItem(e),l=!1!==callibriGetCookie(e,i);l&&callibriSetCookie(e,i)}function callibriFlushTempStorage(){if(supports_callibri_storage()){var e=localStorage.getItem(_callibri.cookie_prefix+"timestamp_callibri");e=e?new Date(e):null;var i=new Date;if(e&&(i-e)/6e4>10)for(var l in localStorage)0==l.indexOf(_callibri.cookie_prefix)&&l.match("callibri")&&localStorage.removeItem(l);callibriSetItemStorage(_callibri.cookie_prefix+"timestamp_callibri",i.toString())}}function callibriRemoveElementItemLocalStorage(e,i){var l,t=callibriGetItemLocalStorage(e),r=[];t=t?JSON.parse(t):[];for(var a=0;a<t.length;a++)i!==(l=t[a])&&r.push(l);r=r.length>0?JSON.stringify(r):"",callibriSetItemLocalStorage(e,JSON.stringify(r))}function callibriSetPostDataFeedback(e){var i="";for(var l in e.feedback)l&&"number"!==l&&"session_id"!==l&&(i+=l+"-:-"+e.feedback[l].toString()+"-;-");var t=callibriGetItemLocalStorage("callibri_feedbacks");return"object"!=typeof(t=t?JSON.parse(t):[])&&(t=[]),-1===t.indexOf(i)&&(t.push(i),callibriSetItemLocalStorage("callibri_feedbacks",JSON.stringify(t))),i}function callibriReplacePhones(){for(var e=_callibri.objects.callibri.format,i=_callibri.objects.callibri.block_class.split(","),l=0;l<i.length;l++)callibriSetValueToBlocksByClass("."+i[l].replace(/\s/g,""),_callibri.number,e);if(_callibri.module_settings&&_callibri.module_settings.search_replace_number)_callibri.PhoneReplacer=new CallibriPhoneReplacer,_callibri.PhoneReplacer.addNumbers(_callibri.module_settings.search_replace_number),_callibri.PhoneReplacer.start(_callibri.number,_callibri.module_settings.search_replace_number_mask);else if(_callibri.module_settings&&_callibri.module_settings.elements){var t,r=_callibri.module_settings.elements,a=r.length;for(l=0;l<a;l++)callibriSetValueToBlocksByClass((t=r[l]).element,_callibri.number,t.format)}}function callibriReplaceCopiesPhones(){var e,i,l,t;if(_callibri.copies_phones)for(e=0;e<_callibri.copies_phones.length;e++)if((i=_callibri.copies_phones[e]).elements)for(l=0;l<i.elements.length;l++)callibriSetValueToBlocksByClass((t=i.elements[l]).element,i.phone,t.format);else i.replace_phones&&(_callibri.PhoneReplacer||(_callibri.PhoneReplacer=new CallibriPhoneReplacer),_callibri.PhoneReplacer.addNumbers(i.replace_phones),_callibri.PhoneReplacer.start(i.phone,_callibri.module_settings.search_replace_number_mask))}function callibriPingCallback(e){4==e.readyState&&201!==e.status&&(callibri_ping_interval&&(clearInterval(callibri_ping_interval),callibri_ping_interval=void 0),_callibri.ping_attempt?_callibri.ping_attempt+=1:_callibri.ping_attempt=1,callibri_error_timeout=setTimeout(callibriPingNumber,Math.floor(Math.random()*Math.pow(2,_callibri.ping_attempt)*1e3))),4==e.readyState&&201===e.status&&"undefined"==typeof callibri_ping_interval&&(callibri_ping_interval=setInterval(callibriPingNumber,1e4),_callibri.ping_attempt=null)}function callibriDocumentHidden(){var e;return void 0!==document.hidden?e="hidden":void 0!==document.msHidden?e="msHidden":void 0!==document.mozHidden?e="mozHidden":void 0!==document.webkitHidden&&(e="webkitHidden"),document[e]}function callibriPingNumber(e){try{if(!callibriDocumentHidden()||e){var i=_callibri.number;if(_callibri.copies_phones){var l,t=_callibri.copies_phones.length;for(l=0;l<t;l++)i+="_"+_callibri.copies_phones[l].phone}var r="/visit?s="+_callibri.session_id+"&p="+i;_callibri.ping_delete&&(r+="&d=1"),callibriGetRequest("//"+_callibri.ws_server_host+r,callibriPingCallback)}}catch(e){callibriSendError(e,"callibriPingNumber")}}function callibriSetLocalCookieValue(e,i){var l=callibriGetResponse();if(l){var t=JSON.parse(l);t.data[e]=i,callibriSaveResponse(t=JSON.stringify(t))}}function callibriGetResponse(){var e=null;return supports_callibri_storage()&&(e=localStorage.getItem("callibri")),null==e&&(e=callibriGetCookie(_callibri.cookie_prefix+"data")),e&&e.indexOf('"unified_domain":')>-1&&(!_callibri.unified_domain||_callibri.unified_domain&&-1===e.indexOf('"unified_domain":'+_callibri.unified_domain))&&(e=null),e}function callibriFlushResponse(e){if(callibriSetCookie(_callibri.cookie_prefix+"data","",void 0,!0),supports_callibri_storage())try{localStorage.removeItem("callibri"),localStorage.removeItem("callibri_module_settings")}catch(e){_callibri.localStorage_off=!0}(document.referrer||"").match("https?://"+location.host)&&!e||callibriGetItemLocalStorage("callibri_visitor_send_event")&&callibriSetItemLocalStorage("callibri_visitor_send_event",null)}function callibriSaveResponse(e){var i,l=!1,t=JSON.parse(e);if(supports_callibri_storage()&&(_callibri.unified_domain&&((i=JSON.parse(e)).unified_domain=_callibri.unified_domain,e=JSON.stringify(i)),l=callibriSetItemStorage("callibri",e)),_callibri.old_module_settings||(_callibri.old_module_settings=t.data.module_settings),!l){var r=(i=JSON.parse(e)).data.module_settings;_callibri.unified_domain&&(i.unified_domain=_callibri.unified_domain),i.data.module_settings="",i=JSON.stringify(i),r&&supports_callibri_storage()&&(r.timestamp=(new Date).valueOf(),callibriSetItemStorage("callibri_module_settings",JSON.stringify(r))),callibriSetCookie(_callibri.cookie_prefix+"data",i,void 0,!0)}}function callibri_change_channel(){if(_callibri.init&&!_callibri.history_change)return!1;if(!(_callibri.landing_channels&&_callibri.landing_channels.length>0))return!1;var e=!1;return _callibri.landing_channels.some((function(e){return e.id==_callibri.channel_id&&(_callibri.current_channel=e,!0)})),!(_callibri.current_channel&&callibri_group_check(_callibri.current_channel)||!(e=_callibri.landing_channels.some((function(e){return e.id!=_callibri.channel_id&&callibri_group_check(e)})))&&!_callibri.current_channel||(_callibri.dynamic&&(_callibri.ping_delete=!0,callibriPingNumber(!0)),_callibri.stop_init=!0,_callibri.get_request=!1,callibriSetCookie("callibri_get_request","",void 0,!0,-1),(e||_callibri.pw)&&(delete _callibri.module_settings,delete _callibri.number,delete _callibri.only_widget,callibriFlushResponse(!0),_callibri.stop_init=!1,callibriInit(),_callibri.ping_delete=!1),0))}function callibriHandleResponse(e,i,l){function t(e){var i=!("v2"!=_callibri.mv_version||!_callibri.chat_operator)&&_callibri.chat_operator;_callibri.history_change=!0,callibriInit(!1,!0),i&&(_callibri.chat_operator=i),"function"==typeof callibriWidgetPageNavigate&&callibriWidgetPageNavigate(e),_callibri.history_change=!1}var r=!_callibri.init;try{var a,n;if(200!=i)return;if(callibriSetItemLocalStorage("callibri_request_send",""),e=callibriCheckIE8_9()?e.replace(/\\'/g,"'"):e,void 0===(n=JSON.parse(e)).data||"object"!=typeof n.data||"object"==typeof n.errors){for(var o in callibriSetItemLocalStorage("callibri_nct","1"),"string"==typeof n.errors&&(n.errors=[[n.errors]]),n.errors){var c="callibri error: "+n.errors[o].join(", ");void 0!==console?console.log(c):window.console.log(c)}return}var s=document.querySelector("#callibri-module-area");if("object"==typeof n.data&&n.data.number&&!n.data.only_widget&&"object"!=typeof n.errors){if(callibri_extend_ms(n),_callibri.stop_init||l&&callibri_change_channel())return;a=n.data.number,n.data.session_id&&callibriSetCookie(_callibri.cookie_prefix+"sessions_callibri",n.data.session_id,1);var _=callibriGetResponse();_||(n.expire_date=(new Date).toString(),callibriSaveResponse(e=JSON.stringify(n))),n.data.dynamic&&(callibriSetItemLocalStorage("callibri_phone",_callibri.number),n.data.copies_phones&&callibriSetItemLocalStorage("callibri_copies_phones",JSON.stringify(n.data.copies_phones)),_callibri.init||(supports_callibri_storage()&&(window.addEventListener("storage",(function(e){_callibri.stop_init||"callibri_phone"==e.key&&e.newValue&&e.oldValue!==e.newValue&&(_callibri.number=e.newValue,callibriSetLocalCookieValue("number",e.newValue),callibriReplacePhones())})),n.data.copies_phones&&window.addEventListener("storage",(function(e){_callibri.stop_init||"callibri_copies_phones"==e.key&&e.newValue&&e.oldValue!==e.newValue&&(_callibri.copies_phones=JSON.parse(e.newValue),callibriSetLocalCookieValue("copies_phones",_callibri.copies_phones),callibriReplaceCopiesPhones())}))),n.data.ping&&(_&&callibriPingNumber(!0),callibri_ping_interval=setInterval(callibriPingNumber,1e4))));for(var b=_callibri.objects.callibri,u=b.block_class.split(","),d=0;d<u.length;d++)callibriSetValueToBlocksByClass("."+u[d].replace(/\s/g,""),a,b.format);if(_callibri.init&&s||!n.data.webcalls||callibriWidgetStart(),n.data.module_settings){if("function"==typeof callibriCheckMS&&callibriCheckMS(n),"string"==typeof n.data.module_settings.elements&&(n.data.module_settings.elements=JSON.parse(n.data.module_settings.elements)),n.data.module_settings.elements){var m,f=n.data.module_settings.elements;for(d=0;d<f.length;d++)callibriSetValueToBlocksByClass((m=f[d]).element,a,m.format)}if(n.data.module_settings.pseudo_links){var g=n.data.module_settings.pseudo_links;for(d=0;d<g.length;d++)callibriSetPseudoLink(g[d])}}var h=n.data.copies_phones;if(null!=h)for(var p=0;p<h.length;p++)if(copy=h[p],copy.element_class)callibriSetValueToBlocksByClass("."+copy.element_class,copy.phone,b.format);else{var v,k,S=copy.elements?copy.elements.length:0;for(v=0;v<S;v++)callibriSetValueToBlocksByClass((k=copy.elements[v]).element,copy.phone,k.format)}callibriUseFeedback(),callibriChangeEmails()}else if(n.data.module_settings){if(callibri_extend_ms(n),_callibri.stop_init||l&&callibri_change_channel())return;n.data.session_id&&(callibriSetCookie(_callibri.cookie_prefix+"sessions_callibri",n.data.session_id,1),callibriUseFeedback(),callibriChangeEmails()),n.expire_date=(new Date).toString(),callibriSaveResponse(e=JSON.stringify(n)),"v2"==_callibri.mv_version&&(_callibri.init&&s||callibriWidgetStart(),"function"==typeof callibriCheckMS&&callibriCheckMS(n))}else callibriSetItemLocalStorage("callibri_nct","1");if("v2"===_callibri.mv_version){var y=_callibri.internal_vars,w=y&&y.date||(new Date).getTime(),C=y&&y.diff||0,E=y&&y.expire_date||w;_callibri.timers||(_callibri.timers={}),clearTimeout(_callibri.timers.get_new_module_settings);var I=6e5-(w&&C<10?w-E:0);_callibri.timers.get_new_module_settings=setTimeout((function(){callibriInit()}),I)}_callibri.module_settings&&_callibri.module_settings.changeable_tags&&_callibri.module_settings.changeable_tags.length>0&&"function"==typeof MutationObserver&&document.querySelectorAll(_callibri.module_settings.changeable_tags).forEach((function(e){var i=!1,l=new MutationObserver((function(e){e.forEach((function(e){i||(i=!0,l.disconnect(),callibriInit(!1,!0),"function"==typeof callibriSetOutsideActions&&_callibri.module_settings.tabs&&callibriSetOutsideActions())}))}));l.observe(e,{attributes:!0,childList:!0,characterData:!0})}))}catch(e){void 0!==console?console.log(e.stack):window.console.log(e),callibriSendError(e,"callibriHandleResponse")}_callibri.init=!0,callibriAfterResponse(),_callibri.get_request=!1,callibriSetCookie("callibri_get_request","",void 0,!0,-1),n&&n.data&&(n.data.clbvid&&(callibriSetCookie("clbvid",n.data.clbvid,void 0,!1,4e3),callibriFindSyncMarks()),n.data.required_file&&!document.querySelector("script[name=CallibriRequiredFile]")&&callibriGetLibrary(n.data.required_file,(function(){}),"CallibriRequiredFile")),r&&(function(e){var i=e.pushState;e.pushState=function(l){return"function"==typeof e.onpushstate&&e.onpushstate({state:l}),setTimeout(t,1,arguments[2]),i.apply(e,arguments)}}(window.history),window.addEventListener("popstate",(function(){t()})))}function callibri_extend_ms(e){var i=_callibri.module_settings&&_callibri.module_settings.hooks_groups,l=_callibri.module_settings&&_callibri.module_settings.catchers_groups,t=_callibri.module_settings&&_callibri.module_settings.quiz_hook,r=_callibri.module_settings&&_callibri.module_settings.lcatcher,a=_callibri.chat_operator;callibri_extend(_callibri,e.data);try{_callibri.init||callibriGetGuid(),i&&(_callibri.module_settings.hooks_groups=i),l&&(_callibri.module_settings.catchers_groups=l),r&&(_callibri.module_settings.lcatcher=r),t&&(_callibri.module_settings.quiz_hook=t),a&&(_callibri.chat_operator=a)}catch(e){callibriSendError(e,"callibri_extend_ms")}}function callibriFindSyncMarks(){if(_callibri.number&&!_callibri.cookie_fbc&&!_callibri.cookie_fbp&&_callibri.use_facebook_pixel||_callibri.session_id&&!_callibri.roistat&&_callibri.use_roistat){var e=function(e){for(var i=0;i<e.length;i++)if(callibriGetCookie(e[i]))return!0;return!1},i=function(e){for(var i,l=e,t="?pid="+_callibri.site_id+"&sid="+_callibri.session_id+"&cvid="+_callibri.clbvid,r=t.slice(),a=0;a<l.length;a++){var n="roistat_visit"==(i=l[a]),o="cookie"+(n?"_":"")+i;_callibri[o]||(_callibri[o]=callibriGetCookie(i)),_callibri[o]&&(t+="&"+(n?"roistat":i.replace("_",""))+"="+_callibri[o])}var c="callibri_"+l.join("_");callibriGetItemLocalStorage(c)||t==r||(callibriGetRequest("//minimo.callibri.ru/"+t),callibriSetItemStorage(c,t))},l=function(e){};_callibri.use_facebook_pixel&&(window.clb_fb_pixel=["_fbc","_fbp"],callibri_wait(window,"clb_fb_pixel",e,200,250,i,l)),_callibri.use_roistat&&(window.clb_roistat=["roistat_visit"],callibri_wait(window,"clb_roistat",e,200,250,i,l))}}function callibriWidgetStart(){var e=_callibri.widget_path;e||(document.querySelector('script[src*="callibri-a.akamaihd.net"]')&&(_callibri.cdn_host="callibri-a.akamaihd.net"),e="//"+_callibri.cdn_host+"/widget_v2.min.js"),document.querySelector("[name=callibriWidget]")&&"function"==typeof callibriInitWidget?callibriInitWidget():callibriGetLibrary(e,(function(){callibriInitWidget()}),"callibriWidget")}function callibriUseFeedback(){_callibri.use_feedback&&(_callibri.form_parser?_callibri.form_parser.init():_callibri.form_parser=new CallibriFormParser)}function callibriCollectionHas(e,i){for(var l=0;l<e.length;l++)if(e[l]==i)return!0;return!1}function callibriFindParentSelector(e,i){for(var l=document.querySelectorAll(i),t=e.parentNode;t&&!callibriCollectionHas(l,t);)t=t.parentNode;return t}function callibriRemoveClass(e,i){for(var l=0;l<e.length;l++)e[l].className.toString().match(i)&&(e[l].className=e[l].className.replace(i,""))}function callibriSetPseudoLink(e){for(var i,l=document.querySelectorAll(e.element),t=l.length,r=0;r<t;r++)(i=l[r]).dataset.callibri_pseudo_link||(i.dataset.callibri_pseudo_link=!0,i.addEventListener("click",(function(i){if(callibriChangeElement(i.target,e.format,e.element,_callibri.number),callibriReplacePhones(),"function"==typeof MutationObserver&&!i.target.dataset.callibri_obs){i.target.dataset.callibri_obs=!0;new MutationObserver((function(l){l.forEach((function(l){"href"!==l.attributeName&&(callibriChangeElement(i.target,e.format,e.element,_callibri.number),callibriReplacePhones())}))})).observe(i.target,{attributes:!0})}}),!1))}function callibriChangeElement(e,i,l,t,r){r||(r=callibriFormatOriginalNumber(t,i)),l.match(/\[href\*=tel\]/)||(e.innerHTML=r),"A"===e.tagName&&(e.href.match(/^tel\:/i)?e.href="tel:+"+t:e.href.match(/^callto\:/i)&&(e.href="callto:+"+t))}function callibriFormatOriginalNumber(e,i){e=e.substr(1);try{e=callibriFormatPhone(e,i)}catch(i){e=callibriFormatPhone(e,"+7 (#{XXX}) #{XXX}-#{XX}-#{XX}")}return e}function callibriSetValueToBlocksByClass(e,i,l){try{if(void 0!==i&&""!==i){i.match(/^(7800)|(7804)/)&&(l=l.replace("+7","8"));var t=i;i=callibriFormatOriginalNumber(i,l);for(var r=document.querySelectorAll(e),a=0;a<r.length;a++)"IMG"===r[a].tagName?callibriChangeImage(r[a],i,!1):callibriChangeElement(r[a],l,e,t,i)}}catch(e){}}function callibriChangeImage(e,i,l){var t=new Image,r=_callibri.site_id.toString()+"_"+_callibri.number+"_default.png",a=document.location.protocol+"//callibri.ru/system/customs_sites_imgs/"+r;t.onerror=t.onabort=function(){e.innerHTML=i},t.onload=function(){e.src=a,e.alt=i},t.src=a}function callibriFormatPhone(e,i){if("undefined"!=typeof callibri_numbers_format)for(var l in callibri_numbers_format)if(0==e.indexOf(l)){i=callibri_numbers_format[l];break}for(var t="",r=i.match(/#{(X)+}/gi),a=i,n=0;n<r.length;n++)a=a.replace(/#{(X)+}/i,"$$"+(n+1)),t+="("+r[n].slice(2,-1).replace(/(X)/gi,"\\d")+")";return t=new RegExp(t),e.replace(t,a)}function callibriBindReady(e){if("loading"===document.readyState)if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(document.attachEvent){var i;try{i=null!==window.frameElement}catch(e){}document.documentElement.doScroll&&!i&&function i(){try{document.documentElement.doScroll("left"),e()}catch(e){setTimeout(i,10)}}(),document.attachEvent("onreadystatechange",(function(){"interactive"===document.readyState&&e()}))}else if(window.addEventListener)window.addEventListener("load",e,!1);else if(window.attachEvent)window.attachEvent("onload",e);else{var l=window.onload;window.onload=function(){l&&l(),e()}}else e()}function callibri_extend(e,i){for(var l in i)e[l]=i[l];return e}function callibriCheckIE8_9(){return!!navigator.userAgent.match(/(MSIE 9\.0)|(MSIE 8\.0)/)}function callibriCheckIE8_9_10_11(){return!!(navigator.userAgent.match(/(MSIE 10\.0)|(MSIE 9\.0)|(MSIE 8\.0)/)||navigator.userAgent.indexOf("Trident/7.0")>-1)}function callibriCheckIE8_9_10(){return!!navigator.userAgent.match(/(MSIE 10\.0)|(MSIE 9\.0)|(MSIE 8\.0)/)}function callibriCheckIE8(){return!!navigator.userAgent.match(/(MSIE 8\.0)/)}function callibriCheckOperaMini(){return!!/opera mini/i.test(navigator.userAgent)}function callibriCheckIE10_11_Edge(){return!!(navigator.userAgent.match(/(MSIE 10\.0)/)||navigator.userAgent.indexOf("Edge")>-1||navigator.userAgent.indexOf("Trident/7.0")>-1)}function callibriSendError(e,i,l,t){_callibri.debug&&window.console.log(e)}function callibriReachGoal(e,i){for(var l,t=e.length,r=0;r<t;r++)l=e[r],i.reachGoal(l.name)}function callibriGetMetrikaClientID(e){return _callibri.ya_client_id?_callibri.ya_client_id:(_callibri.use_guid&&!callibriGetCookie("callibri_ym_wait")&&callibriSetCookie("callibri_ym_wait","true",void 0,!0,10),null)}function callibriGetCalltouchSessionId(e,i){return["/module/messages","/module/contactus","/module/callibri_callback","/widget/catcher_message"].indexOf(i)<0||(_callibri.calltouch_session_id?e.calltouch=_callibri.calltouch_session_id:_callibri.calltouch_site_id&&!callibriGetCookie("callibri_calltouch_wait")&&callibriSetCookie("callibri_calltouch_wait","true",void 0,!0,10)),e}function callibriGetGaClientID(e){return _callibri.ga_client_id?_callibri.ga_client_id:(_callibri.use_guid&&!callibriGetCookie("callibri_ga_wait")&&callibriSetCookie("callibri_ga_wait","true",void 0,!0,10),null)}function callibri_wait(e,i,l,t,r,a,n){var o="callibri_await_";if(!e[o+i+"_completed"]){var c=function(){e[o+i+"_completed"]||(e[o+i+"_completed"]=!0,e[o+i]&&e[o+i].timer&&(clearInterval(e[o+i].timer),e[o+i]=null),a(e[i]))};e[i]&&n?l(e[i])?c():(n(c),setTimeout((function(){callibri_wait(e,i,l,t,r,a)}),0)):l(e[i])?c():e[o+i]||(e[o+i]={timer:setInterval((function(){(l(e[i])||r<++e[o+i].attempt)&&c()}),t),attempt:0})}}function callibriSendYa(e){var i=function(e){if(e&&0!==e.indexOf("amp-")&&(_callibri.ya_client_id=e,(_callibri.dynamic||callibriGetCookie("callibri_ym_wait"))&&!callibriGetItemLocalStorage("callibri_ya_client_id"))){var i="?pid="+_callibri.site_id+"&sid="+_callibri.session_id+"&cvid="+_callibri.clbvid;callibriGetRequest("//minimo.callibri.ru/"+(i+="&yaclientid="+_callibri.ya_client_id)),callibriSetCookie("callibri_ym_wait","",void 0,!0,-1),callibriSetItemLocalStorage("callibri_ya_client_id",_callibri.ya_client_id)}};if("function"==typeof window.ym){ym(_callibri.metrika.counter_id,"getClientID",i);var l=[{callibri_session:_callibri.guid_key.toString()}];return _callibri.clbvid&&l.push({clbvid:_callibri.clbvid}),void ym(_callibri.metrika.counter_id,"params",l)}var t=e&&e.getClientID;if(t||callibriGetCookie("_ym_uid"))if(t)i(e.getClientID()),e.params("callibri_session",_callibri.guid_key.toString()),_callibri.clbvid&&e.params("clbvid",_callibri.clbvid);else{var r=callibriGetCookie("_ym_uid");r&&i(r)}}function callibriSendCalltouch(){if("function"!=typeof window.ct);else{var e=window.ct("calltracking_params");if(!e)return!0;var i=e.filter((function(e){return e.siteId==_callibri.calltouch_site_id}))[0];if(current_counter_value=i?i.sessionId:null,!current_counter_value)return;if(_callibri.calltouch_session_id=current_counter_value,(_callibri.dynamic||callibriGetCookie("callibri_calltouch_wait"))&&!callibriGetItemLocalStorage("callibri_calltoucht_session_id")){var l="?pid="+_callibri.site_id+"&sid="+_callibri.session_id+"&cvid="+_callibri.clbvid;callibriGetRequest("//minimo.callibri.ru/"+(l+="&calltouch="+current_counter_value)),callibriSetCookie("callibri_calltouch_wait","",void 0,!0,-1),callibriSetItemLocalStorage("callibri_calltoucht_session_id",_callibri.calltouch_session_id)}}}function callibriGetGuid(){if(_callibri.metrika){var e=function(e){return!!("function"==typeof window.ym||e&&e.getClientID||callibriGetCookie("_ym_uid"))};callibri_wait(window,"yaCounter"+_callibri.metrika.counter_id,e,50,250,callibriSendYa,(function(e){document.addEventListener("yacounter"+_callibri.metrika.counter_id+"inited",e)}))}if(_callibri.google_analytics4&&callibriGoogleV4Clientid(),_callibri.calltouch_site_id){e=function(e){return!("function"!=typeof window.ct||!window.ct("calltracking_params"))};callibri_wait(window,"calltouch",e,50,250,callibriSendCalltouch)}if(_callibri.use_guid){_callibri.ga="ga_ckpr"==window.GoogleAnalyticsObject?"ga":window.GoogleAnalyticsObject;callibri_wait(window,_callibri.ga,(function(e){return!!(e&&e.getAll||callibriGetCookie("_ga"))}),200,250,(function(e){try{if(e&&e.getAll||!callibriGetCookie("_ga")?_callibri.ga_client_id=e.getAll()[0].get("clientId"):_callibri.ga_client_id=callibriGetCookie("_ga").replace(/GA\d+\.\d+\./,""),(_callibri.dynamic||callibriGetCookie("callibri_ga_wait"))&&!callibriGetItemLocalStorage("callibri_ga_client_id")){var i="?pid="+_callibri.site_id+"&sid="+_callibri.session_id+"&cvid="+_callibri.clbvid;callibriGetRequest("//minimo.callibri.ru/"+(i+="&gaclientid="+_callibri.ga_client_id)),callibriSetCookie("callibri_ga_wait","",void 0,!0,-1),callibriSetItemLocalStorage("callibri_ga_client_id",_callibri.ga_client_id)}if(_callibri.ga_goals&&_callibri.ga_goals.dimension){var l="dimension"+_callibri.ga_goals.dimension.toString(),t="dimension"+(_callibri.ga_goals.dimension+1).toString();e("set",l,_callibri.guid_key),e("set",t,_callibri.ga_client_id),e("set","&uid",_callibri.ga_client_id)}}catch(e){callibriSendError(e,"callibriSendGa")}}),(function(e){window[_callibri.ga]((function(){e(window[_callibri.ga])}))}))}}function callibriGoogleV4Clientid(){callibri_wait(window,"gtag",(function(e){return!("function"!=typeof e&&!callibriGetCookie("_ga"))}),200,250,(function(e){try{var i=e+"_ga",l=function(e){if(e&&(_callibri.dynamic||callibriGetCookie("callibri_ga4_wait"))&&!callibriGetItemLocalStorage("callibri_ga4_client_id")){_callibri[i]=e;var l="?pid="+_callibri.site_id+"&sid="+_callibri.session_id+"&cvid="+_callibri.clbvid;callibriGetRequest("//minimo.callibri.ru/"+(l+="&gaclientid="+_callibri[i])),callibriSetCookie("callibri_ga4_wait","",void 0,!0,-1),callibriSetItemLocalStorage("callibri_ga4_client_id",_callibri[i])}};if("function"==typeof e)return void e("get",_callibri.google_analytics4,"client_id",l);callibriGetCookie("_ga")&&l(callibriGetCookie("_ga").replace(/GA\d+\.\d+\./,""))}catch(e){callibriSendError(e,"callibriSendGa4")}}),(function(e){}))}function callibriChangeEmails(){var e=[];if(_callibri.module_settings&&_callibri.module_settings.email_elements&&(e="string"==typeof _callibri.module_settings.email_elements?JSON.parse(_callibri.module_settings.email_elements):_callibri.module_settings.email_elements),0!=e.length&&_callibri.session_id){var i=callbriGetSubstituteEmail();if(i){var l,t,r,a,n,o,c,s,_=e.length;for(a=0;a<_;a++)for(r=e[a],t=(l=document.querySelectorAll(r)).length,n=0;n<t;n++)callibriChangeEmailDOMElement(l[n],i);if(_callibri.copies_emails)for(_=_callibri.copies_emails.length,o=0;o<_;o++)for(c=(s=_callibri.copies_emails[o]).elements.length,a=0;a<c;a++)for(r=s.elements[a].element,t=(l=document.querySelectorAll(r)).length,n=0;n<t;n++)callibriChangeEmailDOMElement(l[n],s.email)}}}function callbriGetSubstituteEmail(){var e;return _callibri.email?e=_callibri.email:-1!=["archive","nolimit"].indexOf(_callibri.module_settings.email_type)&&(e=_callibri.site_id.toString()+"-"+Number(_callibri.session_id).toString(36)+"@dr-mail.com"),e}function callibriChangeEmailDOMElement(e,i){if(e.innerHTML=e.innerHTML.replace(/([Ð°-ÑÐ-Ð¯a-zA-Z0-9._-]+@[Ð°-ÑÐ-Ð¯a-zA-Z0-9._-]+\.[Ð°-ÑÐ-Ð¯a-zA-Z0-9._-]+)/gi,i),"A"===e.tagName&&0==e.href.indexOf("mailto")&&(e.href="mailto:"+i),i&&_callibri.dynamic&&!e.dataset.callibri_email){e.dataset.callibri_email=i;var l=_callibri.mobile.isMobile?"touchstart":"mouseup";e.addEventListener(l,(function(e){callibriMakeRequest("/module/click",{session_id:_callibri.session_id,client_id:_callibri.site_id,key:e.target.dataset.callibri_email,event_type:"email",clbvid:_callibri.clbvid}),e.target.removeEventListener(e.type,arguments.callee,!0)}))}return e}function callibriGetLibrary(e,i,l,t){if("CallibriLidCatcher"!==l&&"callibri_rating"!==l){var r="function"==typeof requirejs&&"function"==typeof define;_callibri.module_settings&&_callibri.module_settings.requirejs||"function"!=typeof requirejs||!function(e,i){for(var l,t,r="2.1.13".split("."),a=i.split("."),n=Math.max(r.length,a.length),o=0,c=0;c<n&&!o;c++)(l=parseInt(r[c],10)||0)<(t=parseInt(a[c],10)||0)&&(o=1),l>t&&(o=-1);return-1!=o}(0,requirejs.version)||(r=!1);var a=callibriGetCookie("callibri_requirejs");if(r)requirejs([e],(function(e){window[l]=e,i()})),callibriSetCookie("callibri_requirejs","true");else{if(a)return void setTimeout((function(){callibriGetLibrary(e,i,l)}),1e3);callibriLoadLibraryFromScript(e,i,l,t)}}else callibriLoadLibraryFromScript(e,i,l,t)}function callibriLoadLibraryFromScript(e,i,l,t){var r=document.getElementsByTagName("head")[0],a=document.createElement("script");a.setAttribute("charset","utf-8"),a.setAttribute("type","text/javascript"),a.setAttribute("src",e),a.setAttribute("name",l),window["done_script_"+l]=!1,a.onload=a.onreadystatechange=function(){var e="done_script_"+this.getAttribute("name");window[e]||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(window[e]=!0,i())},"function"==typeof t&&(a.onerror=t),r.appendChild(a)}function callibriGetRequest(e,i){var l=callibriXhrRequest();l&&(l.open("GET",e,!0),i&&(l.onreadystatechange=function(){i(l)}),l.send())}function callibriLoadContentCallback(e,i,l){e&&(callibriCheckIE8_9_10_11()||!Object.assign||!Array.from||callibriCheckOperaMini()?callibriGetLibrary("//cdn.callibri.ru/ie_polyfills.min.js",(function(){callibriHandleResponse(e,i,l)})):callibriHandleResponse(e,i,l),callibriBindReady((function(){_callibri.stop_init||(!_callibri.only_widget&&_callibri.number&&(callibriReplacePhones(),callibriReplaceCopiesPhones()),callibriUseFeedback(),callibriChangeEmails())})))}function callibriAfterResponse(){if(!_callibri.feedback_send){_callibri.feedback_send=!0;var e=callibriGetItemLocalStorage("callibri_feedbacks");if(callibriSetItemLocalStorage("callibri_feedbacks",""),e&&_callibri.init){e=JSON.parse(e);for(var i,l,t,r,a=0;a<e.length;a++){l=e[a].split("-;-"),i={feedback:{session_id:_callibri.session_id,number:_callibri.number}};for(var n=0;n<l.length;n++)feed=l[n].split("-:-"),feed.length>0&&(t=feed[0],r=feed[1],i.feedback[t]=r);callibriMakeRequest("/module/contactus",i,null,null,_callibri.api_server_host)}callibriSetItemLocalStorage("callibri_feedbacks","")}}}function callibriSetCookiePrefix(){"string"==typeof callibri_cookie_prefix?(_callibri.cookie_prefix=callibri_cookie_prefix+"_",_callibri.allow_subdomains=!1):(_callibri.cookie_prefix="v1_",_callibri.unified_domain&&(_callibri.cookie_prefix+=_callibri.unified_domain+"_"))}function callibriGetSessionCookie(){var e=callibriGetCookie(_callibri.cookie_prefix+"sessions_callibri")||null;return e||"v1_"==_callibri.cookie_prefix||(e=callibriGetCookie("v1_sessions_callibri")||null),e}function callibriInit(e,i){try{var l=callibriGetCookie("callibri_get_request"),t=(new Date).valueOf();if(_callibri.get_request||l&&(t-Number(l))/1e3<30)return void(_callibri.get_request||(_callibri.get_request=!0,supports_callibri_storage()&&window.addEventListener("storage",(function(e){_callibri.stop_init||"callibri"!=e.key&&"callibri_module_settings"!=e.key||!e.newValue||e.oldValue===e.newValue||(clearTimeout(window.callibri_get_request_timeout),callibriInit())})),callibri_get_request_timeout=setTimeout((function(){_callibri.get_request=!1,callibriInit(e,i)}),3e3)));_callibri.get_request=!0,callibriSetCookie("callibri_get_request",t,void 0,!0),_callibri.mobile||(_callibri.mobile={}),_callibri.mobile.isMobile=!1,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|Mobi/i.test(navigator.userAgent)&&(_callibri.mobile.isMobile=!0,_callibri.mobile.iPhone=!!/iPhone/i.test(navigator.userAgent)),callibriSetCookiePrefix(),_callibri.version="1563955557",_callibri.server_host||(_callibri.server_host="in.callibri.ru"),_callibri.cdn_host||(_callibri.cdn_host="cdn.callibri.ru"),_callibri.module_host||(_callibri.module_host="module.callibri.ru"),_callibri.ws_server_host||(_callibri.ws_server_host="ws.callibri.ru"),_callibri.api_server_host||(_callibri.api_server_host="api.callibri.ru");var r,a,n=0;(r=_callibri.objects.callibri).oid="callibri",r.format||(r.format="+7 (#{XXX}) #{XXX}-#{XX}-#{XX}"),r.block_class||(r.block_class="callibri_phone");var o=callibriGetSessionCookie();callibriFlushTempStorage();var c,s=callibriGetResponse(),_=new RegExp("^https?://"+document.domain),b=callibriGetCookie(_callibri.cookie_prefix+"referrer_callibri"),u=document.referrer,d=callibriGetItemLocalStorage(_callibri.cookie_prefix+"landing_callibri"),m=document.location.search&&document.location.search.match(/utm_referrer=([^&]*)(&|$)/);if(m&&m[1]&&0!==m[1].indexOf("?"))try{u=decodeURIComponent(m[1])}catch(e){u=document.referrer}var f=!1===b;!1===b&&(b=u,callibriSetCookie(_callibri.cookie_prefix+"referrer_callibri",b),callibriSetItemLocalStorage(_callibri.cookie_prefix+"search_callibri",c)),c=document.location.search||"",document.location.hash&&document.location.hash.match("=")&&(c+=document.location.hash.replace(/^#/,c?"&":"?"));var g=e?callibriLoadContentCallback:callibriHandleResponse;if(u&&u.match(_)){if(!o&&!1===f){if(callibriGetItemLocalStorage("callibri_nct"))return;if(a=callibriGetItemLocalStorage("callibri_request_send"))return void callibriMakeRequest("/module/number",a=JSON.parse(a),g,"application/json",_callibri.module_host,6e4);(h=u.split("?")[1])&&(c="?"+h)}}else if(d!=window.location.href&&callibriSetItemLocalStorage(_callibri.cookie_prefix+"landing_callibri",window.location.href),!i){var h=callibriGetItemLocalStorage(_callibri.cookie_prefix+"search_callibri");(b==u&&c&&c!=h&&c.match(/(\?utm_)|(&utm_)|(yclid=)|(gclid=)|(_openstat=)|(city=)/)||b!=u||(d||"").replace(/\?.+/,"")!=window.location.href.replace(/\?.+/,""))&&(s="",b=u,d=window.location.href,callibriFlushResponse(!0),callibriSetCookie(_callibri.cookie_prefix+"referrer_callibri",b),callibriSetItemLocalStorage(_callibri.cookie_prefix+"search_callibri",c))}if(navigator.userAgent.toLowerCase().match("(StackRambler)|(googlebot)|(AdsBot-Google)|(APIs-Google)|(Mediapartners-Google)|(Google Page Speed)|(YandexBot)|(\\+https?:\\/\\/yandex.com\\/bots)|(\\+https?:\\/\\/www.google.com\\/bot.html)|(AdsBot-Google)|(AhrefsBot)|(aport)|(Slurp)|(msnbot)|(\\+https?:\\/\\/go.mail.ru\\/help\\/robots)|(yaDirectBot)|(yetibot)|(\\+https?:\\/\\/www\\.picsearch\\.com\\/bot\\.html)|(sape.bot)|(sape_context)|(gigabot)|(snapbot)|(qwartabot)|(aboutusbot)|(oozbot)|(bingbot)|(\\+https?:\\/\\/www\\.bing\\.com\\/bingbot\\.htm)|(SimplePie)|(SiteLockSpider)|(okhttp)|(ips-agent)|(BLEXBot)|(yanga.co.uk)|(scoutjet)|(similarpages)|(shrinktheweb.com)|(followsite.com)|(dataparksearch)|(feedfetcher-google)|(liveinternet.ru)|(xml-sitemaps.com)|(agama)|(metadatalabs.com)|(h1.hrn.ru)|(googlealert.com)|(seo-rus.com)|(Copyscape.com)|(domaintools.com)|(Nigma.ru)|(dotnetdotcom)|(alexa.com)|(megadownload.net)|(askpeter.info)|(igde.ru)|(ask.com)|(Questok.Ru bot)|(DnyzBot)|(SMTBot)|(PR-CY.RU)|(Baiduspider)|(Sogou web spider)|(Google-Adwords-DisplayAds-WebRender)|(Pulsepoint XT3 web scraper)|(vkShare)".toLowerCase())||c&&c.match(/(\{STYPE\})|(\{SRC\})|(\{PTYPE\})|(\{POS\})|(\{PARAM127\})|(\{PHRASE\})|(%7BSTYPE%7D)|(%7BSRC%7D)|(%7BPTYPE%7D)|(%7BPOS%7D)|(%7BPARAM127%7D)|(%7BPHRASE%7D)/))return;a={uid:document.domain,session_id:o,search:c,referrer:b,landing:document.location.href,exists_cookie_lid_catcher:!!callibriGetCookie("callibri_catcher_was_shown")||null,clbvid:callibriGetCookie("clbvid")||null};var p=callibriGetCookie("callibri_page_segment");p&&(a.page_segment=p),_callibri.unified_domain&&(a.unified_domain=_callibri.unified_domain);for(var v,k=["_fbc","_fbp"],S=0;S<k.length;S++)_callibri["cookie"+(v=k[S])]=callibriGetCookie(v),_callibri["cookie"+v]&&(a[v]=_callibri["cookie"+v]);var y=new Date,w=0;try{if(s?(json=JSON.parse(s),n=(w=new Date(json.expire_date)).getTime?(y-w)/1e3/60:10,_callibri.load_chat_history=callibriGetCookie(_callibri.cookie_prefix+"callibri_chat_history")):_callibri.load_chat_history=null!==a.session_id,s&&n<10)if(json.data.module_settings)g(s,200,!0);else{var C;if(supports_callibri_storage()&&(C=localStorage.getItem("callibri_module_settings")),C)json.data.module_settings=JSON.parse(C),g(s=JSON.stringify(json),200,!0);else{callibriMakeRequest("/module/site_settings",{site_id:json.data.site_id,session_id:json.data.key},(function(e){var i=callibriGetResponse();if(e&&i){json=JSON.parse(i),json.data.module_settings=JSON.parse(e),json.data.module_settings.timestamp=(new Date).valueOf();try{localStorage.setItem("callibri_module_settings",JSON.stringify(json.data.module_settings))}catch(e){}i=JSON.stringify(json)}i&&("complete"!==document.readyState?callibriLoadContentCallback:callibriHandleResponse)(i,200,!0)}),null,_callibri.module_host)}}else callibriFlushResponse(),callibriSetItemStorage("callibri_request_send",JSON.stringify(a)),callibriMakeRequest("/module/number",a,g,"application/json",_callibri.module_host,6e4);_callibri.internal_vars||(_callibri.internal_vars={}),"v2"===_callibri.mv_version&&(_callibri.internal_vars.date=y,_callibri.internal_vars.diff=n,_callibri.internal_vars.expire_date=w)}catch(e){callibriMakeRequest("/module/number",a,g,"application/json",_callibri.module_host,6e4)}}catch(e){void 0!==console?console.log(e.stack):window.console.log(e),console,callibriSendError(e,"callibriInit")}"function"==typeof callibriEtagiStartForm&&callibriEtagiStartForm(0)}function CallibriSendForm(e,i,l,t,r){var a={};a.feedback={name:"",phone:"",email:"",message:"",client_id:_callibri.site_id,number:_callibri.number,session_id:_callibri.session_id,page:document.location.protocol+"//"+document.location.host+document.location.pathname};var n=a.feedback;return e&&(n.phone=callibriSetCorrectPhone(e)),i&&(n.email=i),l&&(n.name=l),t&&(n.message=t),r&&(n.form_name=r),!(!CallibriFormParser.prototype.validate_phone_email(a)||!_callibri.session_id||(callibriMakeRequest("/module/contactus",a,null,null,_callibri.api_server_host),0))}function callibriValidEmail(e){return/^(([^\uE000-\uF8FF\uD83C\uDC00-\uDFFF\uD83D\uDC00-\uDFFF\u2011-\u26FF\uD83E\uDD10-\uDDFFÐ-Ð¯Ð°-Ñ<>()\[\]\\.,;:\s@"]+(\.[^\uE000-\uF8FF\uD83C\uDC00-\uDFFF\uD83D\uDC00-\uDFFF\u2011-\u26FF\uD83E\uDD10-\uDDFFÐ-Ð¯Ð°-Ñ<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|((([a-zA-Z\-0-9]|[Ð-Ð¯Ð°-Ñ\-0-9])+\.)+([a-zA-Z]{2,}|[Ð-Ð¯Ð°-Ñ]{2,})))$/.test(String(e).toLowerCase())}function callibriValidPhone(e){return!(!e||e.length<10||e.length>12||!e.substring(2).match(/^(\d)\1*(?!\1)(\d)+$/g))}function callibriSetCorrectPhone(e){return!!e&&(10==(e=e.toString().replace(/\D/g,"")).length&&(e="7"+e),e)}function callibri_group_check(e,i){function l(e){for(var i=0,l=Object.keys(e),a=0;a<l.length;a++){var n=l[a];e[n].some((function(e){var l=e?r.substring(0,e.length):"false";if(e.indexOf("*")>-1?(e=e.replace(/\*/gi,".*"),"="!=n&&"^"!=n||(e="^"+e,"="==n&&(e+="$")),n="~",e=new RegExp(e)):0===e.indexOf("?")&&(e=e.slice(1)),">"==n&&t.href.indexOf(e)>-1)i++;else if("^"==n&&l==e)i++;else if("="==n){var a=e.indexOf("?")>-1?r:r.replace(t.search,"");(a="/"==a[a.length-1]?a.substring(0,a.length-1):a)==(e="/"==e[e.length-1]?e.substring(0,e.length-1):e)&&i++}else{if("~"!=n||!r.match(e))return;i++}return i}))}return i==l.length}i||(i=document.location);var t=i,r=t.href.replace(i.protocol+"//","");return r="www."==r.substring(0,4)?r.substring(4,r.length):r,bool_include=bool_start=!1,!(e.no_url_conditions&&Object.keys(e.no_url_conditions).length>0&&l(e.no_url_conditions))&&(!(e.url_conditions&&Object.keys(e.url_conditions).length>0)||l(e.url_conditions))}function callibri_add_roistat_mark(e){if(!_callibri.use_roistat)return e;var i=_callibri.cookie_roistat_visit;return i||(i=callibriGetCookie("roistat_visit")),i?(e.roistat=i,e):e}function callibriAddTimezoneData(e,i){if(["/module/messages","/module/contactus","/module/callibri_callback","/widget/catcher_message"].indexOf(i)<0)return e;var l=callibriGetTimezone();return e.timezone_name=l.timezone_name,e.timezone_offset=l.timezone_offset,e}function callibriGetTimezone(){var e=60*(new Date).getTimezoneOffset()*-1,i="";try{i=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}return{timezone_offset:e,timezone_name:i}}if(!_callibri)var _callibri={objects:{callibri:{block_class:"callibri_phone",format:"+7 (#{XXX}) #{XXX}-#{XX}-#{XX}"}}};_callibri.objects||(_callibri.objects={callibri:{block_class:"callibri_phone",format:"+7 (#{XXX}) #{XXX}-#{XX}-#{XX}"}}),CallibriPhoneReplacer=function(e){this.init(e)},CallibriPhoneReplacer.prototype={init:function(e){var i=this;i.numbers=[],i.addNumbers(e),i.number=_callibri.number},addNumbers:function(e){this.numbers=e},setMask:function(e){this.format_mask=e||"XXX"},setNumber:function(e){this.number=e},start:function(e,i){var l=this;l.setNumber(e||_callibri.number);var t=document.querySelectorAll("*:not(script):not(noscript):not(style):not(head):not(html)"),r=l.extended_look_phones(l.numbers,l.number),a=l.find_phones_on_page(r,t);l.phone_for_replace=l.number,l.setMask(i),a.length>0&&a.forEach((function(e){r.forEach((function(i){l.replace_inner_html(e,i),l.replace_html_attributes(e,i)}))}))},extended_look_phones:function(e,i){var l=[];return e.slice().forEach((function(e){if(e!=i){l.push(e),e.match(/^7[0-68-9]\d{9}$/)&&l.push(e.replace(/^7/,"8"));for(var t=e.slice(1);t.length>6;)l.push(t),t=t.slice(1)}})),l.sort((function(e,i){return i.length-e.length}))},find_phones_on_page:function(e,i){if(0===e.length)return[];var l=this,t=[],r=new RegExp("("+e.join(")|(")+")","gi"),a=Array.from(i).filter((function(e){return"BODY"!==e.tagName&&(l.str_only_digits(e.textContent).match(r)||l.str_only_digits(e.outerHTML).match(r))&&!e.outerHTML.match(/(\S+@[\d\-]+\.)|([\d+\-]+@\S+\.)/)})),n=a.length;if(n>1)for(var o=0;o<n;o++){var c=a[o],s=o+1,_=[],b=c.getElementsByTagName("*");if(0!==b.length)b=Array.from(b),_=a.slice(s).filter((function(e){return-1!==b.indexOf(e)}));if(0===_.length||"A"==c.tagName)t.push(c);else{var u,d=l.match_length_number(c,r),m=0,f=0;_.forEach((function(e){e.parentElement==c&&(u=l.match_length_number(e,r),m+=u[1],u[0]>f&&(f=u[0]))})),(d[0]>f||d[1]>m)&&t.push(c)}}else t=a;return t.sort((function(e,i){var t=l.match_length_number(e,r),a=l.match_length_number(i,r);return t[1]-a[1]}))},str_only_digits:function(e){return e.slice().split("").filter((function(e){return e.match(/\d/)})).join("")},match_length_number:function(e,i){var l=this.str_only_digits(e.textContent).match(i);if(l&&l[0].length>0){var t=l[0].length,r=l.filter((function(e){return e})).length,a="A"==e.tagName||e.dataset.phone?1:0;if(a+=e.querySelectorAll("*[data-phone]").length,!((a+=2*e.querySelectorAll("a[href^=tel]").length)>0&&a>r))return[t,r];l=null}if(!l){var n=e.outerHTML.replace(/<!--.*?-->/g,"").replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");l=this.str_only_digits(n).match(i)}return l&&l[0].length>0?[l[0].length,l.filter((function(e){return e})).length]:[0,0]},replace_inner_html:function(e,i){var l=this,t=i,r=["\\d"],a=l.is_change_plus_7(i);a&&(r.push("\\+"),t="+"+t);var n=l.getListIdx(l.str_only(e.textContent,r),t);if(0!==n.length)if(l.is_change_code_town(e.textContent,n[0],i))l.replace_inner_with_town_code(n[0],t,r,a,e);else{var o,c,s,_,b=l.setup_phone_for_replace(i),u=e.innerHTML.slice(),d=t.length-1,m=[];n.forEach((function(e){o=0,s=-1,c=u.slice().split("");for(var i=!1,t=0;t<c.length;t++){var r=c[t];if("<"===r&&(i=!0),!i&&(r.match(/\d/)||a&&"+"==r)&&(++s===e||o>0)&&((_=b[o])||m.push(t),u=l.string_replace_at(u,t,_||" "),++o>d))break;">"===r&&(i=!1)}})),u=l.remove_symbols(u,m),e.innerHTML=u}},is_change_plus_7:function(e){return!(e.length<11)&&"7"===e[0]&&0!==e.indexOf("7800")&&0===this.phone_for_replace.indexOf("7800")},getListIdx:function(e,i){for(var l=[],t=-1;-1!==(t=e.indexOf(i,t+1));)l.push(t);return l},str_only:function(e,i){var l=e.slice(),t=new RegExp(i.join("|"));return l.split("").filter((function(e){return e.match(t)})).join("")},is_change_code_town:function(e,i,l){var t=this;return!(!t.format_mask||l.length!=t.phone_for_replace.length||(t.look_phone_mask=t.find_look_phone_mask(e,i),!t.look_phone_mask||t.look_phone_mask.length<3||t.format_mask.length===t.look_phone_mask.length))},find_look_phone_mask:function(e,i){return e.split(/[^\d]/).filter((function(e){return e}))[i+1]},replace_inner_with_town_code:function(e,i,l,t,r){var a,n,o,c,s,_,b=this.setup_phone_for_replace(i),u=i.length-1,d=(r.textContent,"object"==typeof b?b.join(""):b),m=i.replace(/[^\d;]/g,"");for("7800"!=d.substring(0,4)&&"8800"!=d.substring(0,4)||"7800"===m.substring(0,4)&&"8800"===m.substring(0,4)||(b=d.replace("7","8"));e>=0;){a=0,o=-1,n=(s=r.innerHTML.slice()).slice().split(""),c=!1,_=[];for(var f=0;f<n.length;f++){var g=n[f];if("<"===g&&(c=!0),!c&&(g.match(/\d/)||t&&"+"==g)&&(++o===e||a>0)&&(_.push(f),(a+=1)>u))break;">"===g&&(c=!1)}r.innerHTML=this.change_with_town_code(_,b,s),e=this.getListIdx(this.str_only(r.innerText,l),i)[0]||-1}},setup_phone_for_replace:function(e,i){var l=this,t=l.phone_for_replace.slice(),r=t.length-e.length;if(0===r){var a="7"===t[0]&&"8"===e[0],n=!i&&l.is_change_plus_7(e);(a||n)&&(t=l.string_replace_at(t,0,"8"),n&&(r=-1))}return 0!==r&&(t=r>0?t.slice(r,t.length):new Array(Math.abs(r)).concat(t.split(""))),t},string_replace_at:function(e,i,l){var t=i+l.length;return""===l&&(t+=2),e.substr(0,i)+l+e.substr(t)},change_with_town_code:function(e,i,l){for(var t,r,a,n=this,o=n.format_mask.length-n.look_phone_mask.length,c=[[]],s=0,_=e.length;s<_;s++)a=c[c.length-1],t=e[s],a.push(t),(r=e[s+1])&&r!==t+1&&c.push([]);var b,u,d=0;if("object"==typeof i&&(i=i.join("")),c[0].forEach((function(e){"+"==l[e]?(u=[e],l=n.string_replace_at(l,e," ")):(l=n.string_replace_at(l,e,i[d]),d+=1)})),o>0)b=i.slice(d,c[1].length+o+1),l=(l=l.slice(0,c[2][0])+l.slice(c[2][o])).slice(0,c[1][0])+b+l.slice(c[1][c[1].length-1]+1),d+=b.length,c[2].slice(o).forEach((function(e){l=n.string_replace_at(l,e,i[d]),d+=1}));else{o=Math.abs(o);var m=d+c[1].length;b=i.slice(m-o,m+c[2].length),l=l.slice(0,c[2][0])+b+l.slice(c[2][c[2].length-1]+1);var f=i.slice(d,c[1].length-o+1);l=l.slice(0,c[1][0])+f+l.slice(c[1][c[1].length-1]+1),d+=c[1].length+c[2].length}for(s=3,_=c.length;s<_;s++)c[s].forEach((function(e){i[d]&&(l=n.string_replace_at(l,e,i[d])),d+=1}));return u&&(l=n.remove_symbols(l,u)),l},remove_symbols:function(e,i){if(0===i.length)return e;for(var l,t,r=e.substr(0,i[0]),a=0,n=i.length;a<n;a++)l=i[a+1],t=i[a]+1,r+=l?e.substr(t,l):e.substr(t);return r},replace_html_attributes:function(e,i){var l=this;if(l.str_only_digits(e.outerHTML).match(i)){var t=l.setup_phone_for_replace(i),r=["id","class"],a=e.getElementsByTagName("*");(a=Array.from(a)).push(e),a.forEach((function(e){Array.from(e.attributes||[]).forEach((function(a){if(-1===r.indexOf(a.name)&&"function"!=typeof e[a.name]){var n=e.getAttribute(a.name);if("href"!==a.name||n&&0===n.indexOf("tel:")){var o=l.replace_str_on_number(n,i,t);o&&(4==o.indexOf("+ 8")&&(o=o.replace("+ 8","+7")+t[t.length-1]),e.setAttribute(a.name,o))}}}))}))}},replace_str_on_number:function(e,i,l){var t=this,r=t.getListIdx(this.str_only_digits(e),i);if(0!==r.length){var a,n,o,c=e.slice(),s=i.length-1;return r.forEach((function(e){a=0,o=-1,n=c.slice().split("");for(var i=0;i<n.length&&!(n[i].match(/\d/)&&(++o===e||a>0)&&(c=t.string_replace_at(c,i,l[a]||" "),(a+=1)>s));i++);})),c}}},CallibriFormParser=function(){this.init()},CallibriFormParser.prototype={init:function(){_callibri.use_feedback&&(this.custom_forms=_callibri.feedback_settings.feedback_settings&&void 0===_callibri.feedback_settings.feedback_settings.length,this.setup_form(),this.setup_modal_forms(),this.iframe_message(),this.init_parser=!0)},search_form:function(){var e={};if(this.custom_forms)for(form_key in _callibri.feedback_settings.feedback_settings)e[form_key]=document.querySelectorAll(form_key);else e={0:document.querySelectorAll('form:not([data_form^="callibri"]):not([id^="callibri"]),.modal,#forma')};return e},search_inputs:function(e,i){var l,t=[];for(var r in i)if("button"!==r){l=i[r];try{element=e.querySelector(l)}catch(e){element=null}element&&t.push(element)}return t},valid_form:function(e){if("FORM"===e.tagName||0===e.querySelectorAll("form").length||"forma"===e.id){var i=e.querySelectorAll("input[type='password']");if(e.getAttribute("action")&&e.getAttribute("action").split("?")[0].indexOf("search")>-1)return!1;if(0===i.length)return!0}return!1},init_submit_form:function(e,i){(e=this.is_form(e))&&(e.dataset.callibri_parse_form=0==i||i,e.addEventListener("submit",CallibriFormParser.prototype.send_form,!0))},setup_form:function(){var e,i,l,t,r,a,n,o,c,s=this.search_form();for(form_key in s)for(e=s[form_key],o=0==form_key?null:_callibri.feedback_settings.feedback_settings[form_key],i=e.length,a=0;a<i;a++)if(!(r=e[a]).dataset.callibri_parse_form&&(0!=form_key||this.valid_form(r))){if(c=this.get_buttons(r,o),submit_buttons_length=c.length,submit_buttons_length>0)for(n=0;n<submit_buttons_length;n++)submit_button=c[n],this.init_button(submit_button,o,form_key);if(this.init_submit_form(r,form_key),this.custom_forms&&(l=this.search_inputs(r,o))&&l.length>0&&(r.dataset.callibri_parse_form=0==form_key||form_key,0===r.querySelectorAll("*[data-callibri_parse_form]").length))for(inputs_length=l.length,n=0;n<inputs_length;n++)(t=l[n]).addEventListener("blur",CallibriFormParser.prototype.send_form,!0),t.dataset.callibri_parse_input=form_key;_callibri.module_settings.keydown_form&&r.addEventListener("keydown",CallibriFormParser.prototype.keydown_event,!0)}},keydown_event:function(e){"Enter"!==e.key&&13!=e.which&&13!=e.keyCode||CallibriFormParser.prototype.send_form(e)},get_buttons:function(e,i){var l;return this.custom_forms&&(button_selector=i.button,button_selector&&(l=e.querySelectorAll(button_selector))),l||(l=e.querySelectorAll("input[type='submit']")[0]||e.querySelectorAll("button[type='submit']")[0]||e.querySelectorAll("button[id*=submit]")[0]||e.querySelectorAll("button")[0]||e.querySelectorAll(".button")[0]||e.querySelectorAll("input[name='submit']")[0]||void 0,this.custom_forms||(void 0!==l&&l.style.cssText.match("display: none")&&(l=void 0),void 0===l&&"forma"===e.id&&(l=e.querySelectorAll(".submit input[type='button']")[0]),void 0===l&&(l=e.querySelector('a[class*="submit"],a[id*="submit"],input[class*="submit"],input[id*="submit"]')||void 0)),l=l?[l]:[]),l},is_form:function(e){return"FORM"!==e.tagName&&(e=e.querySelector("form")),e||null},init_button:function(e,i,l){e&&!e.dataset.callibri_parse_form&&(0==l||i.phone||i.email)&&(e.dataset.callibri_parse_form=0==l||l,e.addEventListener("keydown",CallibriFormParser.prototype.send_form,!0),_callibri.mobile.isMobile&&(e.addEventListener("click",CallibriFormParser.prototype.send_form,!0),e.addEventListener("touchstart",CallibriFormParser.prototype.send_form,!0)),e.addEventListener("mousedown",CallibriFormParser.prototype.send_form,!0))},get_module_feedback_data:function(e,i){var l,t,r={feedback:{name:"",phone:"",email:"",message:"",company:"",client_id:_callibri.site_id,number:_callibri.number,session_id:_callibri.session_id,page:document.location.protocol+"//"+document.location.host+document.location.pathname,custom_fields:{}}},a=[],n=[],o=["div","label","span","p","a"];if(i){for(var c in i)if("button"!==c){f=i[c];try{element=e.querySelector(f)}catch(e){element=null}element&&(o.indexOf(element.nodeName.toLowerCase())>-1?l=element.innerText:(t=(l=element.value)&&"phone"==c&&0==this.valid_phone(element.value),element.value&&!t||(a.push(c),(element.dataset.required&&"false"!==element.dataset.required||element.required||"true"==element.getAttribute("aria-required"))&&n.push(c))),void 0!==r.feedback[c]?r.feedback[c]=l:r.feedback.custom_fields[c]=l)}}else for(var s=["phone","tel","telephone","zayavki[tel]","zvonki[tel]","telefon"],_=["msg","text","message"],b=["name","fio","zayavki[name]"],u="",d=e.querySelectorAll("input:not([type='hidden']):not([type='checkbox']),textarea"),m=0;m<d.length;m++){u=d[m].name.toLowerCase();var f=d[m].value;!r.feedback.email&&f&&f.indexOf("@")>0&&d[m].value.length<255?r.feedback.email=f:!r.feedback.phone&&callibriValidPhone(callibriSetCorrectPhone(f))&&(s.filter((function(e){return u.indexOf(e)>-1})).length>0||u.match("[\\("+s.toString().replace(/,/gi,"\\)|\\(")+"\\)]"))?r.feedback.phone=callibriSetCorrectPhone(f):!r.feedback.name&&(b.indexOf(u)>-1||u.match("("+b.toString().replace(/,/gi,")|(")+")"))?r.feedback.name=f:!r.feedback.message&&(_.indexOf(u)>-1||d[m].tagName.toLowerCase().match("textarea"))&&(r.feedback.message=f)}return[r,0==a.length,0==n.length]},valid_phone:function(e){return callibriValidPhone(callibriSetCorrectPhone(e))},validate_phone_email:function(e){var i=!!(e.feedback.email&&e.feedback.email.length>0)&&callibriValidEmail(e.feedback.email),l=!!(e.feedback.phone&&e.feedback.phone.length>0)&&this.valid_phone(e.feedback.phone);return i||l},send_feedback_form:function(e,i){var l=null,t=e.dataset.callibri_parse_form;"true"!==t&&(l=_callibri.feedback_settings.feedback_settings[t]);try{var r=this.get_module_feedback_data(e,l),a=r[0],n=r[1],o=r[2];if(0==n&&"blur"==i||0==o)return!1;if(this.validate_phone_email(a)){a.feedback.form_name=this.feedback_form_name(e);var c=_callibri.landing_service&&_callibri.landing_service.allowVisitorEvent(6);return c&&(a.feedback.page_segment_id=_callibri.landing_service.page_segment.id,_callibri.landing_service.page_segment.ab_test&&(a.feedback.page_segment_ab_test=_callibri.landing_service.page_segment.ab_experiment)),callibriMakeRequest("/module/contactus",a,null,null,_callibri.api_server_host),c&&_callibri.landing_service.sendVisitorEvent(6),!0}}catch(e){return console.log(e),!1}return!1},get_form_target:function(e,i){var l,t="blur"==i?e.dataset.callibri_parse_input:e.dataset.callibri_parse_form;return"submit"!=i&&"keydown"!=i||(l=e),"true"==t?l||e.form||document.querySelectorAll(".modal.in")[0]||(e.parentNode.className.indexOf("submit")<0?e.parentNode:e.parentNode.parentNode):l||callibriFindParentSelector(e,t)},send_form:function(e){if(13==e.keyCode||"keydown"!=e.type)try{var l=CallibriFormParser.prototype.get_form_target(e.currentTarget,e.type);if(_callibri.form_parser.send_feedback_form(l,e.type)){var t,r=l.querySelectorAll("*[data-callibri_parse_form]"),a=l.querySelectorAll("*[data-callibri_parse_input]"),n=a.length;l.removeEventListener("keydown",CallibriFormParser.prototype.keydown_event,!0),(l=_callibri.form_parser.is_form(l))&&l.removeEventListener("submit",arguments.callee,!0);var o=r.length;if(o>0)for(i=0;i<o;i++)(t=r[i]).removeEventListener("keydown",arguments.callee,!0),_callibri.mobile.isMobile&&(t.removeEventListener("click",arguments.callee,!0),t.removeEventListener("touchstart",arguments.callee,!0)),t.removeEventListener("mousedown",arguments.callee,!0);for(i=0;i<n;i++)a[i].removeEventListener("blur",arguments.callee,!0)}}catch(e){console.log(e)}},setup_modal_forms:function(){if(_callibri.feedback_settings&&_callibri.feedback_settings.parser_init)try{"function"==typeof jQuery&&_callibri.feedback_settings.parser_init.jquery?this.init_parser||jQuery("body").on("click",_callibri.feedback_settings.parser_init.button,(function(){setTimeout((function(){CallibriFormParser.prototype.form_parser_search(0)}),2e3)})):this.search_form_button()}catch(e){}},iframe_message:function(){try{if(_callibri.feedback_settings&&_callibri.feedback_settings.iframe_selector){var e=document.querySelector(_callibri.module_settings.iframe_selector);e.contentWindow.postMessage(callibriGetResponse(),e.src)}}catch(e){}},search_form_button:function(){for(var e,i=document.querySelectorAll(_callibri.feedback_settings.parser_init.button),l=0;l<i.length;l++)"true"!=(e=i[l]).dataset.callibri_search_form&&(e.addEventListener("click",(function(e){setTimeout((function(){CallibriFormParser.prototype.form_parser_search(0)}),2e3),e.target.removeEventListener("click",arguments.callee,!0),e.target.dataset.callibri_search_form=!1}),!0),e.dataset.callibri_search_form=!0)},form_parser_search:function(e){for(var i=!0,l=document.querySelectorAll(_callibri.feedback_settings.parser_init.selector_forms),t=0;t<l.length;t++)if(null===l[t].querySelector("[data-callibri_parse_form]")){_callibri.form_parser&&_callibri.form_parser.init(),i=!1;break}i&&e<15?(e+=1,setTimeout((function(){CallibriFormParser.prototype.form_parser_search(e)}),2e3)):CallibriFormParser.prototype.search_form_button()},feedback_form_name:function(e){var i=e.dataset.callibri_form_name;if(!i){var l=e.querySelector("*[data-callibri_form_name]");if(l)i=l.dataset.callibri_form_name;else if(!(i=e.getAttribute("id")||"")){var t=e.querySelector("form");t&&(i=t.getAttribute("id")||"")}}return i}},callibriInit(!0);